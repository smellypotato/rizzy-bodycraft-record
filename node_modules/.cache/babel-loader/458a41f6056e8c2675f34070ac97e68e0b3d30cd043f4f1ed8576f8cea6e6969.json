{"ast":null,"code":"var _jsxFileName = \"/Users/HenryTsui/Desktop/rizzy-bodycraft-record/src/pages/Admin/Categories/Categories.tsx\",\n  _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from \"react\";\nimport { DropdownMenu } from \"../../../components/DropdownMenu/DropdownMenu\";\nimport { Title } from \"../../../components/Title/Title\";\nimport Firebase from \"../../../firebase\";\nimport \"./Categories.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Categories = () => {\n  _s();\n  var _categories$find;\n  const [categories, setCategories] = useState([]);\n  const [categoryId, setCategoryId] = useState();\n  const [activeDropdown, setActiveDropdown] = useState();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let closeDropdown = () => {\n      console.log(\"close dropdown\");\n      setActiveDropdown(undefined);\n    };\n    window.addEventListener(\"click\", closeDropdown);\n    return () => window.removeEventListener(\"click\", closeDropdown);\n  }, []);\n  useEffect(() => {\n    Firebase.instance.getCategories().then(categories => setCategories(categories.map(category => {\n      return {\n        label: category.title,\n        id: category.id\n      };\n    })));\n  }, []);\n  useEffect(() => {\n    if (categoryId) Firebase.instance.getOptions(categoryId).then(options => setOptions(options));\n  }, [categoryId]);\n  const optionRow = useCallback(details => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"option\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: details.title,\n        onChange: () => {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), details.choices && /*#__PURE__*/_jsxDEV(DropdownMenu, {\n        onSelect: () => {},\n        opened: activeDropdown === details.id,\n        onOpen: () => setActiveDropdown(details.id),\n        onClose: () => setActiveDropdown(undefined),\n        default: \"顯示所有選項\",\n        current: \"\",\n        choices: details.choices.map(choice => {\n          return {\n            id: details.id,\n            label: choice\n          };\n        }),\n        allowAdd: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this);\n  }, [options]);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    id: \"categories\",\n    children: [/*#__PURE__*/_jsxDEV(Title, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"categories-dropdown\",\n        children: /*#__PURE__*/_jsxDEV(DropdownMenu, {\n          onSelect: setCategoryId,\n          opened: activeDropdown === \"category\",\n          onOpen: () => setActiveDropdown(\"category\"),\n          onClose: () => setActiveDropdown(undefined),\n          default: \"選擇分類\",\n          current: (_categories$find = categories.find(cat => cat.id === categoryId)) === null || _categories$find === void 0 ? void 0 : _categories$find.label,\n          choices: categories,\n          allowAdd: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), options.map(option => optionRow(option))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n_s(Categories, \"PyW+hvR/vyzTQP7kcIkbUqGA0i4=\");\n_c = Categories;\nvar _c;\n$RefreshReg$(_c, \"Categories\");","map":{"version":3,"names":["useCallback","useEffect","useState","DropdownMenu","Title","Firebase","Categories","categories","setCategories","categoryId","setCategoryId","activeDropdown","setActiveDropdown","options","setOptions","closeDropdown","console","log","undefined","window","addEventListener","removeEventListener","instance","getCategories","then","map","category","label","title","id","getOptions","optionRow","details","choices","choice","find","cat","option"],"sources":["/Users/HenryTsui/Desktop/rizzy-bodycraft-record/src/pages/Admin/Categories/Categories.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { DropdownMenu } from \"../../../components/DropdownMenu/DropdownMenu\";\nimport { Title } from \"../../../components/Title/Title\";\nimport Firebase from \"../../../firebase\";\nimport \"./Categories.css\";\nimport { Option } from \"../../../type\";\nexport const Categories = () => {\n\n    const [categories, setCategories] = useState<Array<{ label: string, id: string }>>([]);\n    const [categoryId, setCategoryId] = useState<string>();\n    const [activeDropdown, setActiveDropdown] = useState<string>();\n    const [options, setOptions] = useState<Array<Option>>([]);\n\n    useEffect(() => {\n        let closeDropdown = () => {\n            console.log(\"close dropdown\");\n            setActiveDropdown(undefined)\n        };\n        window.addEventListener(\"click\", closeDropdown);\n\n        return () => window.removeEventListener(\"click\", closeDropdown);\n    }, [])\n\n    useEffect(() => {\n        Firebase.instance.getCategories().then(categories =>\n            setCategories(categories.map(category => {\n                return { label: category.title, id: category.id }\n            }))\n        );\n    }, [])\n\n    useEffect(() => {\n        if (categoryId) Firebase.instance.getOptions(categoryId).then(options => setOptions(options));\n    }, [categoryId]);\n\n    const optionRow = useCallback((details: Option) => {\n        return (\n            <div className=\"option\">\n                <button className=\"delete\" />\n                <input value={ details.title } onChange={ () => {} } />\n                {   details.choices &&\n                    <DropdownMenu onSelect={ () => {} } opened={ activeDropdown === details.id } onOpen={ () => setActiveDropdown(details.id) } onClose={ () => setActiveDropdown(undefined) } default={ \"顯示所有選項\" } current={ \"\" } choices={ details.choices.map(choice => { return { id: details.id, label: choice } }) } allowAdd />\n                }\n            </div>\n        )\n    }, [options]);\n\n    return (\n        <main id=\"categories\">\n            <Title />\n            <section id=\"content\">\n                <div id=\"categories-dropdown\">\n                    <DropdownMenu onSelect={ setCategoryId } opened={ activeDropdown === \"category\"} onOpen={ () => setActiveDropdown(\"category\") } onClose={ () => setActiveDropdown(undefined) } default={ \"選擇分類\" } current={ categories.find(cat => cat.id === categoryId)?.label } choices={ categories } allowAdd />\n                </div>\n                { options.map(option => optionRow(option)) }\n            </section>\n        </main>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}