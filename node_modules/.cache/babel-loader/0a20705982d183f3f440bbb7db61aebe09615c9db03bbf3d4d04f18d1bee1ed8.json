{"ast":null,"code":"import _regeneratorRuntime from\"/Users/HenryTsui/Desktop/rizzy-bodycraft-record/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/HenryTsui/Desktop/rizzy-bodycraft-record/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/HenryTsui/Desktop/rizzy-bodycraft-record/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect,useState}from\"react\";import{Title}from\"../../../components/Title/Title\";import Firebase from\"../../../firebase\";import\"./StudentList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var StudentList=function StudentList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),pendingList=_useState2[0],setPendingList=_useState2[1];useEffect(function(){var unSubscribePendingAccountChange=Firebase.instance.onPendingAccountsChange(setPendingList);return function(){unSubscribePendingAccountChange();};},[]);var approvePending=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(application){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:Firebase.instance.approvePendingAccount(application.email);// await Firebase.instance.removePendingAccount(id);\ncase 1:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var declinePending=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Firebase.instance.removePendingAccount(id);case 2:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}(),[]);return/*#__PURE__*/_jsxs(\"main\",{id:\"student_list\",children:[/*#__PURE__*/_jsx(Title,{}),/*#__PURE__*/_jsxs(\"section\",{id:\"request\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pending accounts\"}),pendingList.map(function(application){return/*#__PURE__*/_jsxs(\"div\",{className:\"pending_account\",children:[/*#__PURE__*/_jsx(\"div\",{children:application.name}),/*#__PURE__*/_jsx(\"div\",{children:application.email}),/*#__PURE__*/_jsx(\"button\",{className:\"approve_icon\",onClick:function onClick(){return approvePending(application);}}),/*#__PURE__*/_jsx(\"button\",{className:\"decline_icon\",onClick:function onClick(){return declinePending(application.id);}})]},application.id);})]})]});};","map":{"version":3,"names":["useCallback","useEffect","useState","Title","Firebase","StudentList","pendingList","setPendingList","unSubscribePendingAccountChange","instance","onPendingAccountsChange","approvePending","application","approvePendingAccount","email","declinePending","id","removePendingAccount","map","name"],"sources":["/Users/HenryTsui/Desktop/rizzy-bodycraft-record/src/pages/Admin/StudentList/StudentList.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { Title } from \"../../../components/Title/Title\";\nimport Firebase from \"../../../firebase\";\nimport { PendingApplcation } from \"../../../type\";\nimport \"./StudentList.css\";\n\nexport const StudentList = () => {\n\n    const [pendingList, setPendingList] = useState<Array<PendingApplcation>>([]);\n\n    useEffect(() => {\n        let unSubscribePendingAccountChange = Firebase.instance.onPendingAccountsChange(setPendingList);\n        return () => {\n            unSubscribePendingAccountChange();\n        }\n    }, [])\n\n    const approvePending = useCallback(async (application: PendingApplcation) => {\n        Firebase.instance.approvePendingAccount(application.email);\n        // await Firebase.instance.removePendingAccount(id);\n    }, []);\n\n    const declinePending = useCallback(async (id: string) => {\n        await Firebase.instance.removePendingAccount(id);\n    }, []);\n\n    return (\n        <main id=\"student_list\">\n            <Title />\n            <section id=\"request\">\n                <h3>Pending accounts</h3>\n                {   pendingList.map(application => (\n                        <div key={ application.id } className=\"pending_account\">\n                            <div>{ application.name }</div>\n                            <div>{ application.email }</div>\n                            <button className=\"approve_icon\" onClick={ () => approvePending(application) } />\n                            <button className=\"decline_icon\" onClick={ () => declinePending(application.id) } />\n                        </div>\n                    ))\n\n                }\n            </section>\n        </main>\n    )\n}\n"],"mappings":"+ZAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACxD,OAASC,KAAK,KAAQ,iCAAiC,CACvD,MAAOC,SAAQ,KAAM,mBAAmB,CAExC,MAAO,mBAAmB,CAAC,wFAE3B,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CAE7B,cAAsCH,QAAQ,CAA2B,EAAE,CAAC,wCAArEI,WAAW,eAAEC,cAAc,eAElCN,SAAS,CAAC,UAAM,CACZ,GAAIO,gCAA+B,CAAGJ,QAAQ,CAACK,QAAQ,CAACC,uBAAuB,CAACH,cAAc,CAAC,CAC/F,MAAO,WAAM,CACTC,+BAA+B,EAAE,CACrC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMG,eAAc,CAAGX,WAAW,4FAAC,iBAAOY,WAA8B,mHACpER,QAAQ,CAACK,QAAQ,CAACI,qBAAqB,CAACD,WAAW,CAACE,KAAK,CAAC,CAC1D;AAAA,qDACH,+DAAE,EAAE,CAAC,CAEN,GAAMC,eAAc,CAAGf,WAAW,6FAAC,kBAAOgB,EAAU,8IAC1CZ,SAAQ,CAACK,QAAQ,CAACQ,oBAAoB,CAACD,EAAE,CAAC,wDACnD,iEAAE,EAAE,CAAC,CAEN,mBACI,cAAM,EAAE,CAAC,cAAc,wBACnB,KAAC,KAAK,IAAG,cACT,iBAAS,EAAE,CAAC,SAAS,wBACjB,oBAAI,kBAAgB,EAAK,CACrBV,WAAW,CAACY,GAAG,CAAC,SAAAN,WAAW,qBACvB,aAA4B,SAAS,CAAC,iBAAiB,wBACnD,qBAAOA,WAAW,CAACO,IAAI,EAAQ,cAC/B,qBAAOP,WAAW,CAACE,KAAK,EAAQ,cAChC,eAAQ,SAAS,CAAC,cAAc,CAAC,OAAO,CAAG,yBAAMH,eAAc,CAACC,WAAW,CAAC,EAAE,EAAG,cACjF,eAAQ,SAAS,CAAC,cAAc,CAAC,OAAO,CAAG,yBAAMG,eAAc,CAACH,WAAW,CAACI,EAAE,CAAC,EAAE,EAAG,GAJ7EJ,WAAW,CAACI,EAAE,CAKnB,EACT,CAAC,GAGA,GACP,CAEf,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}