{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { getAuth, signInWithEmailAndPassword, signOut } from \"firebase/auth\";\nimport { collection, getFirestore, onSnapshot } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDHTYHXBArEA-6bqGFdbqsG1_KLuzGRE2I\",\n  authDomain: \"rizzy-bodycraft-record.firebaseapp.com\",\n  projectId: \"rizzy-bodycraft-record\",\n  storageBucket: \"rizzy-bodycraft-record.appspot.com\",\n  messagingSenderId: \"930408534506\",\n  appId: \"1:930408534506:web:127e3be9dd6236d9836293\",\n  measurementId: \"G-SKFHESV2J6\"\n};\nexport default class Firebase {\n  constructor() {\n    this.app = void 0;\n    this.auth = void 0;\n    this.firestore = void 0;\n    console.log(\"initializing firebase\");\n    this.app = initializeApp(firebaseConfig);\n    this.auth = getAuth(this.app);\n    this.firestore = getFirestore(this.app);\n  }\n  static get instance() {\n    return Firebase._inst;\n  }\n  static init() {\n    if (!Firebase._inst) Firebase._inst = new Firebase();\n  }\n\n  // auth\n\n  async login(email, password) {\n    await signInWithEmailAndPassword(this.auth, email, password).then(credential => {\n      console.log(credential);\n    }).catch(err => {\n      console.error(err.code);\n    });\n  }\n  async logout() {\n    await signOut(Firebase.instance.auth);\n  }\n\n  // firestore\n\n  async onPendingAccountsChange(callback) {\n    return onSnapshot(collection(Firebase.instance.firestore, \"application\"), collection => {\n      let pendings = [];\n      collection.forEach(application => pendings.push(Object.assign({\n        id: application.id\n      }, application.data())));\n      callback(pendings);\n    });\n  }\n  async syncPendingAccounts() {}\n}\nFirebase._inst = void 0;","map":{"version":3,"names":["initializeApp","getAuth","signInWithEmailAndPassword","signOut","collection","getFirestore","onSnapshot","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","Firebase","constructor","app","auth","firestore","console","log","instance","_inst","init","login","email","password","then","credential","catch","err","error","code","logout","onPendingAccountsChange","callback","pendings","forEach","application","push","Object","assign","id","data","syncPendingAccounts"],"sources":["/Users/HenryTsui/Desktop/rizzy-bodycraft-record/src/firebase.ts"],"sourcesContent":["import { FirebaseApp, initializeApp } from \"firebase/app\";\nimport { Auth, getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from \"firebase/auth\";\nimport { collection, doc, Firestore, getDoc, getDocs, getFirestore, onSnapshot } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDHTYHXBArEA-6bqGFdbqsG1_KLuzGRE2I\",\n  authDomain: \"rizzy-bodycraft-record.firebaseapp.com\",\n  projectId: \"rizzy-bodycraft-record\",\n  storageBucket: \"rizzy-bodycraft-record.appspot.com\",\n  messagingSenderId: \"930408534506\",\n  appId: \"1:930408534506:web:127e3be9dd6236d9836293\",\n  measurementId: \"G-SKFHESV2J6\"\n};\n\nexport type PendingApplcation = {\n    id: string,\n    name: string,\n    email: string\n    // apply_date:\n}\n\nexport default class Firebase {\n\n    private static _inst: Firebase;\n\n    app: FirebaseApp;\n    auth: Auth;\n    firestore: Firestore;\n\n    private constructor() {\n        console.log(\"initializing firebase\");\n        this.app = initializeApp(firebaseConfig);\n        this.auth = getAuth(this.app);\n        this.firestore = getFirestore(this.app)\n    }\n\n    public static get instance() {\n        return Firebase._inst;\n    }\n\n    static init() {\n        if (!Firebase._inst) Firebase._inst = new Firebase();\n    }\n\n    // auth\n\n    async login(email: string, password: string) {\n        await signInWithEmailAndPassword(this.auth, email, password).then(credential => {\n            console.log(credential);\n        }).catch((err: { code: string, message: string } ) => {\n            console.error(err.code);\n        });\n    }\n\n    async logout() {\n        await signOut(Firebase.instance.auth);\n    }\n\n    // firestore\n\n    async onPendingAccountsChange(callback: (pendings: Array<PendingApplcation>) => void) {\n        return onSnapshot(collection(Firebase.instance.firestore, \"application\"), collection => {\n            let pendings: Array<PendingApplcation> = [];\n            collection.forEach(application => pendings.push(Object.assign({ id: application.id }, application.data() as { name: string, email: string })));\n            callback(pendings)\n        })\n    }\n\n    async syncPendingAccounts() {\n\n    }\n}\n"],"mappings":"AAAA,SAAsBA,aAAa,QAAQ,cAAc;AACzD,SAAeC,OAAO,EAAsBC,0BAA0B,EAAEC,OAAO,QAAQ,eAAe;AACtG,SAASC,UAAU,EAAmCC,YAAY,EAAEC,UAAU,QAAQ,oBAAoB;AAE1G,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,wCAAwC;EACpDC,SAAS,EAAE,wBAAwB;EACnCC,aAAa,EAAE,oCAAoC;EACnDC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE,2CAA2C;EAClDC,aAAa,EAAE;AACjB,CAAC;AASD,eAAe,MAAMC,QAAQ,CAAC;EAQlBC,WAAW,GAAG;IAAA,KAJtBC,GAAG;IAAA,KACHC,IAAI;IAAA,KACJC,SAAS;IAGLC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;IACpC,IAAI,CAACJ,GAAG,GAAGjB,aAAa,CAACO,cAAc,CAAC;IACxC,IAAI,CAACW,IAAI,GAAGjB,OAAO,CAAC,IAAI,CAACgB,GAAG,CAAC;IAC7B,IAAI,CAACE,SAAS,GAAGd,YAAY,CAAC,IAAI,CAACY,GAAG,CAAC;EAC3C;EAEA,WAAkBK,QAAQ,GAAG;IACzB,OAAOP,QAAQ,CAACQ,KAAK;EACzB;EAEA,OAAOC,IAAI,GAAG;IACV,IAAI,CAACT,QAAQ,CAACQ,KAAK,EAAER,QAAQ,CAACQ,KAAK,GAAG,IAAIR,QAAQ,EAAE;EACxD;;EAEA;;EAEA,MAAMU,KAAK,CAACC,KAAa,EAAEC,QAAgB,EAAE;IACzC,MAAMzB,0BAA0B,CAAC,IAAI,CAACgB,IAAI,EAAEQ,KAAK,EAAEC,QAAQ,CAAC,CAACC,IAAI,CAACC,UAAU,IAAI;MAC5ET,OAAO,CAACC,GAAG,CAACQ,UAAU,CAAC;IAC3B,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAsC,IAAM;MAClDX,OAAO,CAACY,KAAK,CAACD,GAAG,CAACE,IAAI,CAAC;IAC3B,CAAC,CAAC;EACN;EAEA,MAAMC,MAAM,GAAG;IACX,MAAM/B,OAAO,CAACY,QAAQ,CAACO,QAAQ,CAACJ,IAAI,CAAC;EACzC;;EAEA;;EAEA,MAAMiB,uBAAuB,CAACC,QAAsD,EAAE;IAClF,OAAO9B,UAAU,CAACF,UAAU,CAACW,QAAQ,CAACO,QAAQ,CAACH,SAAS,EAAE,aAAa,CAAC,EAAEf,UAAU,IAAI;MACpF,IAAIiC,QAAkC,GAAG,EAAE;MAC3CjC,UAAU,CAACkC,OAAO,CAACC,WAAW,IAAIF,QAAQ,CAACG,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC;QAAEC,EAAE,EAAEJ,WAAW,CAACI;MAAG,CAAC,EAAEJ,WAAW,CAACK,IAAI,EAAE,CAAoC,CAAC,CAAC;MAC9IR,QAAQ,CAACC,QAAQ,CAAC;IACtB,CAAC,CAAC;EACN;EAEA,MAAMQ,mBAAmB,GAAG,CAE5B;AACJ;AAlDqB9B,QAAQ,CAEVQ,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}