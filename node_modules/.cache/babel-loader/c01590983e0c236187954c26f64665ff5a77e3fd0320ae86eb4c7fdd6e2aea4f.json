{"ast":null,"code":"import _slicedToArray from\"/Users/HenryTsui/Desktop/rizzy-bodycraft-record/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Route,Routes,useNavigate}from\"react-router-dom\";import{Menu}from\"./components/Menu/Menu\";import Firebase from\"./firebase\";import{SetLoggedInContext}from\"./hooks/contexts\";import{Categories}from\"./pages/Admin/Categories/Categories\";import{StudentList}from\"./pages/Admin/StudentList/StudentList\";import{Login}from\"./pages/Login/Login\";import{Dashboard}from\"./pages/User/Dashboard/Dashboard\";import{SignUp}from\"./pages/User/SignUp/Signup\";// const path = \"dashboard\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var path=\"student-list\";var App=function App(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];// temp\nuseEffect(function(){var fromEmailLink=Firebase.instance.isAnnoymousAccount();if(fromEmailLink)navigate(\"/signup\".concat(window.location.search));var unSubscribeAuthStateChange=Firebase.instance.onAuthStateChanged(function(user){console.log(\"auth state changed\",user);console.log(\"from email link\",fromEmailLink);if(user&&!fromEmailLink){setLoggedIn(true);navigate(\"/\".concat(path));}else if(!fromEmailLink){setLoggedIn(false);console.log(\"to login\");navigate(\"/login\");}});return function(){unSubscribeAuthStateChange();};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[loggedIn&&/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(SetLoggedInContext.Provider,{value:setLoggedIn,children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/student-list\",element:/*#__PURE__*/_jsx(StudentList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/categories\",element:/*#__PURE__*/_jsx(Categories,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Login,{})})]})})]});};export default App;","map":{"version":3,"names":["useEffect","useState","Route","Routes","useNavigate","Menu","Firebase","SetLoggedInContext","Categories","StudentList","Login","Dashboard","SignUp","path","App","navigate","loggedIn","setLoggedIn","fromEmailLink","instance","isAnnoymousAccount","window","location","search","unSubscribeAuthStateChange","onAuthStateChanged","user","console","log"],"sources":["/Users/HenryTsui/Desktop/rizzy-bodycraft-record/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Route, Routes, useNavigate } from \"react-router-dom\";\nimport { Menu } from \"./components/Menu/Menu\";\nimport Firebase from \"./firebase\";\nimport { SetLoggedInContext } from \"./hooks/contexts\";\nimport { Categories } from \"./pages/Admin/Categories/Categories\";\nimport { StudentList } from \"./pages/Admin/StudentList/StudentList\";\nimport { Login } from \"./pages/Login/Login\";\nimport { Dashboard } from \"./pages/User/Dashboard/Dashboard\";\nimport { SignUp } from \"./pages/User/SignUp/Signup\";\n\n// const path = \"dashboard\";\nconst path = \"student-list\";\n\nconst App = () => {\n    const navigate = useNavigate();\n    const [loggedIn, setLoggedIn] = useState(false); // temp\n\n    useEffect(() => {\n        const fromEmailLink = Firebase.instance.isAnnoymousAccount();\n        if (fromEmailLink) navigate(`/signup${window.location.search}`);\n        const unSubscribeAuthStateChange = Firebase.instance.onAuthStateChanged((user) => {\n            console.log(\"auth state changed\", user);\n            console.log(\"from email link\", fromEmailLink);\n            if (user && !fromEmailLink) {\n                setLoggedIn(true);\n                \n                navigate(`/${path}`);\n            }\n            else if (!fromEmailLink) {\n                setLoggedIn(false);\n\n                console.log(\"to login\");\n                navigate(\"/login\");\n            }\n        })\n        return () => {\n            unSubscribeAuthStateChange();\n        }\n    }, []);\n\n    return (\n        <div className=\"App\">\n            { loggedIn && <Menu /> }\n            <SetLoggedInContext.Provider value={ setLoggedIn }>\n                <Routes>\n                    <Route path=\"/student-list\" element={ <StudentList /> } />\n                    <Route path=\"/categories\" element={ <Categories /> } />\n                    <Route path=\"/dashboard\" element={ <Dashboard /> } />\n                    <Route path=\"/signup\" element={ <SignUp /> } />\n                    <Route path=\"/login\" element={ <Login /> } />\n                    <Route path=\"*\" element={ <Login /> } />\n                </Routes>\n            </SetLoggedInContext.Provider>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"qIAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,KAAK,CAAEC,MAAM,CAAEC,WAAW,KAAQ,kBAAkB,CAC7D,OAASC,IAAI,KAAQ,wBAAwB,CAC7C,MAAOC,SAAQ,KAAM,YAAY,CACjC,OAASC,kBAAkB,KAAQ,kBAAkB,CACrD,OAASC,UAAU,KAAQ,qCAAqC,CAChE,OAASC,WAAW,KAAQ,uCAAuC,CACnE,OAASC,KAAK,KAAQ,qBAAqB,CAC3C,OAASC,SAAS,KAAQ,kCAAkC,CAC5D,OAASC,MAAM,KAAQ,4BAA4B,CAEnD;AAAA,wFACA,GAAMC,KAAI,CAAG,cAAc,CAE3B,GAAMC,IAAG,CAAG,QAANA,IAAG,EAAS,CACd,GAAMC,SAAQ,CAAGX,WAAW,EAAE,CAC9B,cAAgCH,QAAQ,CAAC,KAAK,CAAC,wCAAxCe,QAAQ,eAAEC,WAAW,eAAqB;AAEjDjB,SAAS,CAAC,UAAM,CACZ,GAAMkB,cAAa,CAAGZ,QAAQ,CAACa,QAAQ,CAACC,kBAAkB,EAAE,CAC5D,GAAIF,aAAa,CAAEH,QAAQ,kBAAWM,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAG,CAC/D,GAAMC,2BAA0B,CAAGlB,QAAQ,CAACa,QAAQ,CAACM,kBAAkB,CAAC,SAACC,IAAI,CAAK,CAC9EC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEF,IAAI,CAAC,CACvCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEV,aAAa,CAAC,CAC7C,GAAIQ,IAAI,EAAI,CAACR,aAAa,CAAE,CACxBD,WAAW,CAAC,IAAI,CAAC,CAEjBF,QAAQ,YAAKF,IAAI,EAAG,CACxB,CAAC,IACI,IAAI,CAACK,aAAa,CAAE,CACrBD,WAAW,CAAC,KAAK,CAAC,CAElBU,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,CACvBb,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CAAC,CAAC,CACF,MAAO,WAAM,CACTS,0BAA0B,EAAE,CAChC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,mBACI,aAAK,SAAS,CAAC,KAAK,WACdR,QAAQ,eAAI,KAAC,IAAI,IAAG,cACtB,KAAC,kBAAkB,CAAC,QAAQ,EAAC,KAAK,CAAGC,WAAa,uBAC9C,MAAC,MAAM,yBACH,KAAC,KAAK,EAAC,IAAI,CAAC,eAAe,CAAC,OAAO,cAAG,KAAC,WAAW,IAAK,EAAG,cAC1D,KAAC,KAAK,EAAC,IAAI,CAAC,aAAa,CAAC,OAAO,cAAG,KAAC,UAAU,IAAK,EAAG,cACvD,KAAC,KAAK,EAAC,IAAI,CAAC,YAAY,CAAC,OAAO,cAAG,KAAC,SAAS,IAAK,EAAG,cACrD,KAAC,KAAK,EAAC,IAAI,CAAC,SAAS,CAAC,OAAO,cAAG,KAAC,MAAM,IAAK,EAAG,cAC/C,KAAC,KAAK,EAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,cAAG,KAAC,KAAK,IAAK,EAAG,cAC7C,KAAC,KAAK,EAAC,IAAI,CAAC,GAAG,CAAC,OAAO,cAAG,KAAC,KAAK,IAAK,EAAG,GACnC,EACiB,GAC5B,CAEd,CAAC,CAED,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}